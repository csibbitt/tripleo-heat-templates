## This environment serves the purpose of enabling deployment of QPID dispatch routers (aka QDR).
## Each overcloud node will have one local qdrouterd service running and operating in edge mode,
## eg. sending received data straight to defined MetricsQdrConnectors


resource_registry:
  OS::TripleO::Services::MetricsQdr: ../../deployment/metrics/qdr-container-ansible.yaml

parameter_defaults:

  # Exercise the new, preferred interface
  MetricsQdrVars:
    deployment_mode: edge_only  # or controller_mesh
    qdr_connectors:
      - host: stf-default-interconnect-5671-service-telemetry.apps-crc.testing
        port: 443
        role: edge
        sslProfile: sslProfile
        verifyHostname: false

  # Test that legacy vars work too
  MetricsQdrAuthenticateClient: 'yes'